<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>H5实现垂直时间滚动轴</title>

  <link rel="stylesheet" href="index.css">
  <script src="js/jquery.min.js"></script>
</head>
<body>

<ul class="timeline">
  <li class="bar"></li>
</ul>
<div class="container">
  <section data-name="2017-01-10">
    <h1>首页</h1>
    <h2>vue.js</h2>
    <p>Vue.js（读音 /vjuː/，类似于 view） 是一套构建用户界面的渐进式框架。与其他重量级框架不同的是，Vue 采用自底向上增量开发的设计。Vue 的核心库只关注视图层，它不仅易于上手，还便于与第三方库或既有项目整合。另一方面，当与单文件组件和 Vue 生态系统支持的库结合使用时，Vue 也完全能够为复杂的单页应用程序提供驱动。</p>
    <p>如果你是有经验的前端开发者，想知道 Vue.js 与其它库/框架的区别，查看对比其它框架。</p>
    <img src="http://bpic.588ku.com/back_pic/00/04/13/75/29f23b37c3fd039e262b957399f6ffcf.jpg" alt="">
  </section>
  <section data-name="2017-01-12">
    <h1>介绍</h1>
    <h2>vue.js</h2>
    <p>Vue.js（读音 /vjuː/，类似于 view） 是一套构建用户界面的渐进式框架。与其他重量级框架不同的是，Vue 采用自底向上增量开发的设计。Vue 的核心库只关注视图层，它不仅易于上手，还便于与第三方库或既有项目整合。另一方面，当与单文件组件和 Vue 生态系统支持的库结合使用时，Vue 也完全能够为复杂的单页应用程序提供驱动。</p>
    <p>如果你是有经验的前端开发者，想知道 Vue.js 与其它库/框架的区别，查看对比其它框架。</p>
    <img src="http://bpic.588ku.com/back_pic/02/64/88/4957863e5539451.jpg" alt="" />
  </section>
  <section data-name="2017-01-14">
    <h1>项目案例</h1>
    <h2>vue.js</h2>
    <p>Vue.js（读音 /vjuː/，类似于 view） 是一套构建用户界面的渐进式框架。与其他重量级框架不同的是，Vue 采用自底向上增量开发的设计。Vue 的核心库只关注视图层，它不仅易于上手，还便于与第三方库或既有项目整合。另一方面，当与单文件组件和 Vue 生态系统支持的库结合使用时，Vue 也完全能够为复杂的单页应用程序提供驱动。</p>
    <p>如果你是有经验的前端开发者，想知道 Vue.js 与其它库/框架的区别，查看对比其它框架。</p>
  </section>
  <section data-name="2017-01-16">
    <h1>其他</h1>
    <h2>vue.js</h2>
    <p>Vue.js（读音 /vjuː/，类似于 view） 是一套构建用户界面的渐进式框架。与其他重量级框架不同的是，Vue 采用自底向上增量开发的设计。Vue 的核心库只关注视图层，它不仅易于上手，还便于与第三方库或既有项目整合。另一方面，当与单文件组件和 Vue 生态系统支持的库结合使用时，Vue 也完全能够为复杂的单页应用程序提供驱动。</p>
    <p>如果你是有经验的前端开发者，想知道 Vue.js 与其它库/框架的区别，查看对比其它框架。</p>
  </section>
  <section data-name="2017-01-18">
    <h1>关于我</h1>
    <h2>vue.js</h2>
    <p>Vue.js（读音 /vjuː/，类似于 view） 是一套构建用户界面的渐进式框架。与其他重量级框架不同的是，Vue 采用自底向上增量开发的设计。Vue 的核心库只关注视图层，它不仅易于上手，还便于与第三方库或既有项目整合。另一方面，当与单文件组件和 Vue 生态系统支持的库结合使用时，Vue 也完全能够为复杂的单页应用程序提供驱动。</p>
    <p>如果你是有经验的前端开发者，想知道 Vue.js 与其它库/框架的区别，查看对比其它框架。</p>
  </section>
  <section data-name="2017-01-20">
    <h1>联系我</h1>
    <h2>vue.js</h2>
    <p>Vue.js（读音 /vjuː/，类似于 view） 是一套构建用户界面的渐进式框架。与其他重量级框架不同的是，Vue 采用自底向上增量开发的设计。Vue 的核心库只关注视图层，它不仅易于上手，还便于与第三方库或既有项目整合。另一方面，当与单文件组件和 Vue 生态系统支持的库结合使用时，Vue 也完全能够为复杂的单页应用程序提供驱动。</p>
    <p>如果你是有经验的前端开发者，想知道 Vue.js 与其它库/框架的区别，查看对比其它框架。</p>
    <img src="http://bpic.588ku.com/back_pic/03/51/89/095792db5835107.jpg" alt="">
  </section>
  <section data-name="2017-01-30">
    <h1>查看更多</h1>
    <h2>vue.js</h2>
    <p>Vue.js（读音 /vjuː/，类似于 view） 是一套构建用户界面的渐进式框架。与其他重量级框架不同的是，Vue 采用自底向上增量开发的设计。Vue 的核心库只关注视图层，它不仅易于上手，还便于与第三方库或既有项目整合。另一方面，当与单文件组件和 Vue 生态系统支持的库结合使用时，Vue 也完全能够为复杂的单页应用程序提供驱动。</p>
    <p>如果你是有经验的前端开发者，想知道 Vue.js 与其它库/框架的区别，查看对比其它框架。</p>
  </section>
</div>

<script>
//"use strict";

$(function () {
    function sumSection() {
        return $(".container").height();
    }

    console.log(sumSection());
    function setDimensionBar() {
        $(".bar").css({
            "height": $(window).height() / sumSection() * 100 + "%"
        });
    }

    function setSection() {
        $.each($("section"), function (i, element) {
            $(element).css({
                "min-height": $(window).height()
            });
        });
    }
    console.log(setDimensionBar());
    console.log(setSection());
    function addBehaviours() {
        var sections = $("section");
        $.each($(".node"), function (i, element) {
            $(element).on("click", function (e) {
                e.preventDefault();
                var scroll = $(sections[i]).offset().top;
                $('html, body').animate({
                    scrollTop: scroll
                }, 500);
            });
        });
    }

    function arrangeNodes() {
        $(".node").remove();
        $.each($("section"), function (i, element) {
            var name = $(element).data("name");
            var node = $("<li class='node'><span>" + name + "</span></li>");
            $(".timeline").append(node);

            $(node).css({
                "top": $(".timeline").height() / $(document).height() * $(element).offset().top
            });
        });
        addBehaviours();
    }

    $(window).on("scroll", function () {
        var top = window.scrollY / sumSection() * 100;
        $(".bar").css({
            "top": top + "%"
        });
    });

    $(window).on("resize", function () {
        setSection();
        arrangeNodes();
        setDimensionBar();
    });

    setTimeout(function () {
        setSection();
        arrangeNodes();
        setDimensionBar();
    }, 200);
});
</script>

</body>
</html>
